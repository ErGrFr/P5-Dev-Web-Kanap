let panierTotal={prixTotal:0,qtyTotal:0},lesCanaps=JSON.parse(localStorage.getItem("selectionCanap"));for(i=0;i<lesCanaps.length;i++)majUnCanap(lesCanaps[i],i);function majUnCanap(leCanap,indexDataId){const leParent=document.getElementById("cart__items"),leTemplate=document.getElementById("template");let leClone=document.importNode(leTemplate.content,!0);leClone.getElementById("ImgProduit").setAttribute("src",`${leCanap.img}`),leClone.getElementById("ImgProduit").setAttribute("alt",`${leCanap.alt}`),leClone.getElementById("NomProduit").textContent=`${leCanap.name}`,leClone.getElementById("CouleurProduit").textContent=`Couleur : ${leCanap.color}`,leClone.getElementById("QtyProduit").textContent=`qté : ${leCanap.qty}`,panierTotal.qtyTotal+=parseInt(`${leCanap.qty}`),leClone.getElementById("PrixProduit").textContent=`Prix : ${leCanap.price} €`,panierTotal.prixTotal+=parseInt(`${leCanap.price}`)*parseInt(`${leCanap.qty}`),leClone.getElementById("QtyProduitInput").setAttribute("value",`${leCanap.qty}`),leClone.querySelector(".deleteItem").setAttribute("data-id",`${indexDataId}`),leClone.querySelector("#QtyProduitInput").setAttribute("data-id",`${indexDataId}`),leParent.appendChild(leClone),console.log(leClone)}console.log(panierTotal),document.getElementById("totalQuantity").innerText=panierTotal.qtyTotal,document.getElementById("totalPrice").innerText=panierTotal.prixTotal;let boutonsSupprimmer=document.querySelectorAll(".deleteItem");for(unBouton of boutonsSupprimmer)unBouton.addEventListener("click",(function(eventSuppression){deleteCanap(eventSuppression.target.getAttribute("data-id"))}));function deleteCanap(indexPanier){console.log("suppression canap"+indexPanier);let lesCanaps=JSON.parse(localStorage.getItem("selectionCanap"));lesCanaps.splice(indexPanier,1),console.log(lesCanaps);let monCart=localStorage.setItem("selectionCanap",JSON.stringify(lesCanaps));window.location.reload()}let lesQtyInput=document.querySelectorAll("#QtyProduitInput");for(unQtyInput of(console.log(lesQtyInput),lesQtyInput))unQtyInput.addEventListener("change",(function(eventModificationQty){modificationQty(eventModificationQty.target.getAttribute("data-id"),eventModificationQty.target.value)}));function modificationQty(indexPanier,newQty){console.log("modifQty "+indexPanier+" "+newQty);let lesCanaps=JSON.parse(localStorage.getItem("selectionCanap"));lesCanaps[indexPanier].qty=newQty;let monCart=localStorage.setItem("selectionCanap",JSON.stringify(lesCanaps));window.location.reload()}let url="http://localhost:3000/api/order/";fetch(url).then(response=>response.json().then(laCommande=>{console.log(laCommande)}).catch()).catch(response=>console.log(response));