let lesCanaps=lectureLocalstorage();if(null!=lesCanaps){for(i=0;i<lesCanaps.length;i++)majUnCanap(lesCanaps[i],i);majInfosTotalPanier()}let boutonsSupprimmer=document.querySelectorAll(".deleteItem");for(unBouton of boutonsSupprimmer)unBouton.addEventListener("click",(function(eventSuppression){deleteCanap(eventSuppression.target.getAttribute("data-id"))}));let lesQtyInput=document.querySelectorAll(".itemQuantity");for(unQtyInput of lesQtyInput)unQtyInput.addEventListener("change",(function(eventModificationQty){let qty=eventModificationQty.target.value;console.log(qty),0==qty&&(qty=1,eventModificationQty.target.value=1),modificationQty(eventModificationQty.target.getAttribute("data-id"),qty)}));let contact={firstName:"",lastName:"",address:"",city:"",email:""},products=[],contactValide={firstName:!1,lastName:!1,adress:!0,city:!1,email:!1};contact.firstName=verifChiffreFormulaire("firstName"),contact.lastName=verifChiffreFormulaire("lastName"),contact.city=verifChiffreFormulaire("city"),contact.address="ici",contact.email=verifArobasFormulaire("email"),console.log(contact),document.getElementById("order").addEventListener("click",(function(commander){if(console.log(contactValide),console.log("click"),contactValide.firstName&&contactValide.lastName&&contactValide.adress&&contactValide.city&&contactValide.email){products=ListeIdLocalstorage();let url,cmd=fetch("http://localhost:3000/api/products/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contact:contact,products:products})}).then(response=>response.json().then(maCommande=>{localStorage.clear(),window.location.href="./confirmation.html?orderId="+maCommande.orderId}).catch(response=>console.log(response))).catch(response=>console.log(response))}else console.log("condition false")}));