let clef=localStorage.getItem("selectionCanap");console.log(clef);let infosCart={id:"",name:"",img:"",imgalt:"",color:"",qty:0,price:""},maSelectionCanaps=[];document.getElementById("addToCart").addEventListener("click",(function(){let infoQty=document.querySelector("#quantity"),infoColor=document.querySelector("#colors");if("0"!=infoQty.value&&""!=infoQty.value&&""!=infoColor.value){infosCart.id=urlID[1],infosCart.qty=infoQty.value,infosCart.color=infoColor.value,null!=localStorage.getItem("selectionCanap")&&(maSelectionCanaps=lectureLocalstorage());let index=RechercheIdCanapLocalstorage(maSelectionCanaps,infosCart.id,infosCart.color);if(null==index)maSelectionCanaps.push(infosCart),sauvegardeDansLocalstorage(maSelectionCanaps);else{let QtySav=parseInt(maSelectionCanaps[index].qty);QtySav+=parseInt(infosCart.qty),maSelectionCanaps[index].qty=QtySav,sauvegardeDansLocalstorage(maSelectionCanaps)}let elm=document.querySelector(".item__content"),alert=document.createElement("div");alert.setAttribute("class","alert alert-success"),alert.setAttribute("role","alert"),alert.textContent="votre séléction a été ajouté au panier",elm.appendChild(alert)}}));let urlID=location.search.substring().split("=");function MajInfosCanap(UnCanap){if(void 0!==UnCanap){let monImg=document.querySelector(".item__img"),newElm=document.createElement("img");newElm.setAttribute("src",`${UnCanap.imageUrl}`),newElm.setAttribute("alt",`${UnCanap.altTxt}`),monImg.appendChild(newElm),infosCart.img=UnCanap.imageUrl,infosCart.imgalt=UnCanap.altTxt,document.getElementById("title").innerHTML=`${UnCanap.name}`,infosCart.name=UnCanap.name,document.getElementById("price").innerHTML=`${UnCanap.price} `,infosCart.price=UnCanap.price,document.getElementById("description").innerHTML=`${UnCanap.description} `;for(const UneCouleur of UnCanap.colors)monImg=document.querySelector("#colors"),newElm=document.createElement("option"),newElm.setAttribute("value",`${UneCouleur}`),newElm.innerHTML=`${UneCouleur}`,monImg.appendChild(newElm)}}function RechercheIdCanapLocalstorage(LesCanaps,IdCanap,CouleurCanap){let i=0;for(UnCanap of LesCanaps){if(UnCanap.id==IdCanap&&UnCanap.color==CouleurCanap)return i;i++}return null}let url="http://localhost:3000/api/products/"+urlID[1];fetch(url).then(response=>response.json().then(LeCanap=>{MajInfosCanap(LeCanap)}).catch()).catch(()=>{document.querySelector(".item__img").setAttribute("class","hide"),document.querySelector(".item__content__addButton").setAttribute("class","hide"),document.querySelector(".item__content__description").setAttribute("class","hide"),document.querySelector(".item__content__settings").setAttribute("class","hide"),document.querySelector("#prix").setAttribute("class","hide"),document.getElementById("title").innerText="Article inconnu"});