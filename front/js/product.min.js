let clef=localStorage.getItem("selectionCanap");console.log(clef);let infosCart={id:"",name:"",img:"",color:"",qty:0,price:""},maSelectionCanaps=[];document.getElementById("addToCart").addEventListener("click",(function(){let infoQty=document.querySelector("#quantity"),infoColor=document.querySelector("#colors");if("0"!=infoQty.value&&""!=infoQty.value&&""!=infoColor.value){infosCart.id=urlID[1],infosCart.qty=infoQty.value,infosCart.color=infoColor.value,null!=localStorage.getItem("selectionCanap")&&(maSelectionCanaps=JSON.parse(localStorage.getItem("selectionCanap")));let index=RechercheIdCanapLocalstorage(maSelectionCanaps,infosCart.id,infosCart.color);if(null==index){maSelectionCanaps.push(infosCart),console.log(maSelectionCanaps);let monCart=localStorage.setItem("selectionCanap",JSON.stringify(maSelectionCanaps))}else{let QtySav=parseInt(maSelectionCanaps[index].qty);QtySav+=parseInt(infosCart.qty),maSelectionCanaps[index].qty=QtySav;let monCart=localStorage.setItem("selectionCanap",JSON.stringify(maSelectionCanaps))}}}));let urlID=location.search.substring().split("=");function MajInfosCanap(UnCanap){if(void 0!==UnCanap){document.querySelector(".item__img").innerHTML=`<img src="${UnCanap.imageUrl}" alt="${UnCanap.altTxt}">`,infosCart.img=UnCanap.imageUrl,document.getElementById("title").innerHTML=`<p>${UnCanap.name}</p>`,infosCart.name=UnCanap.name,document.getElementById("price").innerHTML=`${UnCanap.price} `,infosCart.price=UnCanap.price,document.getElementById("description").innerHTML=`${UnCanap.description} `;for(const UneCouleur of UnCanap.colors)document.getElementById("colors").innerHTML+=`<option value="${UneCouleur}">${UneCouleur}</option>`}}function RechercheIdCanapLocalstorage(LesCanaps,IdCanap,CouleurCanap){let i=0;for(UnCanap of LesCanaps){if(UnCanap.id==IdCanap&&UnCanap.color==CouleurCanap)return i;i++}return null}let url="http://localhost:3000/api/products/"+urlID[1];fetch(url).then(response=>response.json().then(LeCanap=>{MajInfosCanap(LeCanap)}).catch()).catch(response=>console.log(response));