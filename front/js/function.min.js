function majUnCanap(leCanap,indexDataId){const leParent=document.getElementById("cart__items"),leTemplate=document.getElementById("template");let leClone=document.importNode(leTemplate.content,!0);leClone.getElementById("ImgProduit").setAttribute("src",`${leCanap.img}`),leClone.getElementById("ImgProduit").setAttribute("alt",`${leCanap.imgalt}`),replaceIdByClass(leClone,"ImgProduit","ImgProduit"),leClone.getElementById("NomProduit").textContent=`${leCanap.name}`,replaceIdByClass(leClone,"NomProduit","NomProduit"),leClone.getElementById("CouleurProduit").textContent=`Couleur : ${leCanap.color}`,replaceIdByClass(leClone,"CouleurProduit","CouleurProduit");let elm=leClone.querySelector(".cart__item__content__settings__quantity"),oldElm=leClone.getElementById("QtyProduit"),lab=document.createElement("label");lab.setAttribute("class","QtyProduit"),lab.setAttribute("for",`itemQuantity${indexDataId}`),lab.textContent=`Qté : ${leCanap.qty}`,elm.appendChild(lab),elm.replaceChild(lab,oldElm),leClone.getElementById("PrixProduit").textContent=`Prix : ${leCanap.price} €`,replaceIdByClass(leClone,"PrixProduit","PrixProduit"),leClone.getElementById("QtyProduitInput").setAttribute("value",`${leCanap.qty}`),leClone.getElementById("QtyProduitInput").setAttribute("id",`itemQuantity${indexDataId}`),leClone.querySelector(".cart__item").setAttribute("data-id",`${indexDataId}`),leClone.querySelector(".deleteItem").setAttribute("data-id",`${indexDataId}`),leClone.querySelector(".itemQuantity").setAttribute("data-id",`${indexDataId}`),leClone.querySelector(".QtyProduit").setAttribute("data-id",`${indexDataId}`),leParent.appendChild(leClone)}function replaceIdByClass(docHtml,theId,theClass){let element=docHtml.getElementById(theId);element.setAttribute("class",theClass),element.removeAttribute("id")}function deleteCanap(indexPanier){let lesCanaps=lectureLocalstorage();lesCanaps.splice(indexPanier,1),sauvegardeDansLocalstorage(lesCanaps);let lesArticles=document.querySelectorAll(".cart__item");for(unArticle of lesArticles)unArticle.getAttribute("data-id")==indexPanier&&unArticle.remove();majInfosTotalPanier()}function modificationQty(indexPanier,newQty){let lesCanaps=lectureLocalstorage();lesCanaps[indexPanier].qty=newQty,sauvegardeDansLocalstorage(lesCanaps);let panier=document.querySelectorAll(".QtyProduit");for(article of panier)article.getAttribute("data-id")==indexPanier&&(article.textContent=`qté : ${newQty}`);majInfosTotalPanier()}function majInfosTotalPanier(){let panierTotal={prixTotal:0,qtyTotal:0};console.log(panierTotal);let lesCanaps=lectureLocalstorage();if(null!=lesCanaps)for(unCanap of lesCanaps)panierTotal.qtyTotal+=parseInt(`${unCanap.qty}`),panierTotal.prixTotal+=parseInt(`${unCanap.price}`)*parseInt(`${unCanap.qty}`);if(document.getElementById("totalQuantity").innerText=panierTotal.qtyTotal,document.getElementById("totalPrice").innerText=panierTotal.prixTotal,0==panierTotal.qtyTotal&&0==panierTotal.prixTotal){let elm=document.querySelector("#cartAndFormContainer h1").innerText="Votre Panier est vide !";console.log(elm)}}function verifChiffreFormulaire(id){let leFormulaire=document.querySelector(`#${id}`);leFormulaire.addEventListener("change",(function(){leFormulaire.value.match(/[0-9]/)?(document.getElementById(`${id}ErrorMsg`).innerText="Erreur , ne pas saisir de chiffres svp. ",contactValide[`${id}`]=!1):(document.getElementById(`${id}ErrorMsg`).innerText="",contactValide[`${id}`]=!0,contact[`${id}`]=leFormulaire.value),0==leFormulaire.value.length&&(document.getElementById(`${id}ErrorMsg`).innerText="Erreur , ce champ est obligatoire. ",contactValide[`${id}`]=!1)}))}function verifArobasFormulaire(id){let leFormulaire=document.querySelector(`#${id}`);leFormulaire.addEventListener("change",(function(){leFormulaire.value.match("@")?(document.getElementById(`${id}ErrorMsg`).innerText="",contactValide[`${id}`]=!0,contact[`${id}`]=leFormulaire.value):(document.getElementById(`${id}ErrorMsg`).innerText="Erreur , il faut un Email valide ( @ ) svp.",contactValide[`${id}`]=!1)}))}function lectureLocalstorage(){return JSON.parse(localStorage.getItem("selectionCanap"))}function sauvegardeDansLocalstorage(element){localStorage.setItem("selectionCanap",JSON.stringify(element))}function ListeIdLocalstorage(){let listeId=[];for(unCanap of(lePanier=lectureLocalstorage(),lePanier))listeId.push(unCanap.id);return listeId}